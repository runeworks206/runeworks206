runeworks="undefined"!=typeof runeworks?runeworks:{},runeworks.chatbox=function(){let t={defaultChannel:"main",channels:["main","notifications"],commandsLimit:5,scrollbackLimit:100,typingTimeout:6e3,uuid:function(){let t=(new Date).getTime();return"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now&&(t+=performance.now()),"xxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)}))},parent:"body",left:"0%",top:"0%",height:"98ch",width:"80ch",minHeight:"23ch",minWidth:"56ch",padding:"0px",background:"rgba(   1,   1,   1, 0.44)",border:"1px solid rgba( 255, 255, 255, 0.11)",borderRadius:"6px",color:"rgba( 255, 255, 255, 1.00)",mainFontFamily:"'Poppins', sans-serif",mainFontSize:"9pt",headerHeight:"5vh",headerFontSize:"11pt",headerBorder:"1px solid rgba(   1,   1,   1, 0.55)",headerFontColor:"rgba( 255, 255, 255, 1.00)",tabHeight:"3.5vh",tabLeftPadding:"0.2em",tabsWidth:"9ch",whoWidth:"5ch",tabsFontSize:"11pt",tabsNavigatorWidth:"3em",tabsFontColor:"rgba( 189, 189, 189, 1.00)",tabsFontColorHighlighted:"rgba( 255, 255, 255, 1.00)",tabsBorderColor:"rgba(  84,  84,  84, 0.44)",tabsInactiveColor:"rgba(   1,   1,   1, 0.04)",tabsInactiveHoverColor:"rgba(   1,   1,   1, 0.14)",tabsContinuationWidth:"2ch",arrowSize:"8px",arrowColor:"rgba( 255, 255, 255, 0.33)",arrowColorActive:"rgba( 255, 255, 255, 0.55)",arrowColorInvalid:"rgba(  14,  14,  14, 0.55)",outputFontSize:"10pt",outputFontColor:"rgba( 255, 255, 255, 1.00)",outputActiveColor:"rgba(   1,   1,   1, 0.55)",inputHeight:"6.3vh",inputBoxHeight:"4.1vh",inputBottom:"0.4ch",inputPadding:"0.4em",inputBackground:"rgba( 255, 255, 255, 0.03)",inputBackgroundFocus:"rgba( 255, 255, 255, 0.13)",inputRadius:"4px",inputFontSize:"11pt",inputFontColor:"rgba( 211, 211, 211, 1.00)",inputFontColorFocus:"rgba( 255, 255, 255, 1.00)",inputRightPadding:"5.5ch",speakerFontSize:"9pt",lineTopPadding:"0.2em",lineBottomPadding:"0.2em",lineLeftPadding:"30px",lineRightPadding:"1.2ch",lineSpeakerColor:"rgba( 201, 201, 201, 1.00)",lineTimestampColor:"rgba( 101, 101, 101, 1.00)",statusFontColor:"rgba( 121, 121, 121, 1.00)",arrowEnterSize:"8px",arrowEnterDimensions:"5ch",arrowEnterColor:"rgba( 167, 167, 167, 0.40)",arrowEnterHoverColor:"rgba( 167, 167, 167, 1.00)",userLineHeight:"3.2ch"},e={receiveMessage:"rw-receive-message-UUID",receiveData:"rw-receive-data-UUID",userTyping:"rw-user-typing-UUID",userStopped:"rw-user-stopped-UUID",tabSwitch:"rw-tab-switch-UUID",arrowLeft:"rw-arrow-left-UUID",arrowRight:"rw-arrow-right-UUID",raiseMessage:"rw-raise-message-UUID",startTyping:"rw-start-typing-UUID",stopTyping:"rw-stop-typing-UUID"},i=/UUID/g;class n{constructor(n){for(var c in this.outputs={},this.tabs={},this.users=[],this.roles=[],this.commands=[],this.previousText="",this.raiseEvent=r,this.addCSS=s,this.getUUID=t.uuid,this.defaultChannel=n&&n?.defaultChannel?n?.defaultChannel:t.defaultChannel,this.commandsLimit=n&&n?.commandsLimit?n?.commandsLimit:t.commandsLimit,this.scrollbackLimit=n&&n?.scrollbackLimit?n?.scrollbackLimit:t.scrollbackLimit,this.typingTimeout=n&&n?.typingTimeout?n?.typingTimeout:t.typingTimeout,this.typingTimer,this.uuid=n&&n?.uuid?n?.uuid:t.uuid(),this.body=document.querySelector("body"),this.parent=document.querySelector(n&&n?.parent?n?.parent:t.parent),this.events={},e)this.events[c]=e[c].replace(i,this.uuid);console.log("This chatbox's events list:",this.events),this.markup=a.replace(i,this.uuid),this.parent.insertAdjacentHTML("beforeend",this.markup),this.self=document.querySelector("#rwc-"+this.uuid);let l=n&&n?.channels?n?.channels:t.channels;-1==l.indexOf("who")&&l.unshift("who"),-1==l.indexOf("main")&&l.unshift("main"),l.forEach((t=>{this.addChannel({identifier:t})})),this.activate("main"),this.input=document.querySelector("#rwc-input-"+this.uuid+" input"),this.cssIdentifier="rwc-css-"+this.uuid,this.cssRules=d.replace(i,this.uuid),this.addCSS(this.cssRules,"#rwc-"+this.uuid,this.cssIdentifier),this.modifyRender(),this.lineMarkup=o.replace(i,this.uuid),this.addCSS(`\n        #rwc-${this.uuid} {\n          left  : ${n&&n?.left?n?.left:t.left};\n          top   : ${n&&n?.top?n?.top:t.top};\n          height: ${n&&n?.height?n?.height:t.height};\n          width : ${n&&n?.width?n?.width:t.width};\n          min-width: ${n&&n?.minWidth?n?.minWidth:t.minWidth};\n        }\n      `,"#rwc-"+this.uuid,this.cssIdentifier),this.listen(),n&&void 0!==n.draggable&&0==n?.draggable||this.draggable(this)}unlisten(){let t=document.querySelector("body");t.removeEventListener(this.events.receiveMessage,this.receiveMessage.bind(this)),t.removeEventListener(this.events.receiveData,this.processData.bind(this)),t.removeEventListener(this.events.userTyping,this.userTyping.bind(this)),t.removeEventListener(this.events.userStopped,this.userStopped.bind(this)),t.removeEventListener(this.events.tabSwitch,this.tabSwitch.bind(this)),t.removeEventListener(this.events.arrowLeft,this.arrowLeft.bind(this)),t.removeEventListener(this.events.arrowRight,this.arrowRight.bind(this))}listen(){let t=document.querySelector("body");Object.keys(this.events).forEach(((e,i)=>{let n=this.events[e];switch(e){case"receiveMessage":t.addEventListener(n,this.receiveMessage.bind(this));break;case"receiveData":t.addEventListener(n,this.processData.bind(this));break;case"userTyping":t.addEventListener(n,this.userTyping.bind(this));break;case"userStopped":t.addEventListener(n,this.userStopped.bind(this));break;case"tabSwitch":t.addEventListener(n,this.tabSwitch.bind(this));break;case"arrowLeft":t.addEventListener(n,this.arrowLeft.bind(this));break;case"arrowRight":t.addEventListener(n,this.arrowRight.bind(this));break;default:console.log(`Event ${e} for ${this.uuid} does not have an assigned listener; it may be a broadcaster or is unassigned.`)}})),this.input.addEventListener("keyup",(t=>{if("Enter"===t.code)this.raiseMessage();else{let t=this.input.value.length;t>0?this.typingStatus():1==this.previousText.length&&0==t&&this.resetTyping(),this.previousText=this.input.value}})),this.input.addEventListener("keydown",(t=>{switch(t.code){case"ArrowUp":this.cycleCommands("up",t);break;case"ArrowDown":this.cycleCommands("down",t)}})),this.resizeObserver=new ResizeObserver((t=>{let e=document.querySelector(`#rwc-background-${this.uuid}`);fastdom?fastdom.measure((()=>{fastdom.mutate((()=>{e.style.backdropFilter="blur(9px)",e.style.width=this.self.style?.width,e.style.height=this.self.style?.height}))})):(e.style.backdropFilter="blur(9px)",e.style.width=this.self.style?.width,e.style.height=this.self.style?.height);let i=Object.values(this.outputs).filter((t=>t.id==this.active));i.length>0&&(i=i[0],i.element.scrollTop=i.element.scrollHeight),document.querySelector(`#rwc-tabs-anchor-${this.uuid}`).offsetTop<=document.querySelector(`#rwc-tabs-${this.uuid}`).offsetHeight?document.querySelector(`#rwc-tabs-navigator-${this.uuid} .rwc-arrow-right`).classList.add("invalid"):document.querySelector(`#rwc-tabs-navigator-${this.uuid} .rwc-arrow-right`).classList.remove("invalid");let n=document.querySelectorAll(`#rwc-tabs-${this.uuid} .rwc-tab.invisible`);if(n.length>0){let t=document.querySelector(`#rwc-tabs-navigator-${this.uuid} .rwc-arrow-left`).getBoundingClientRect(),e=document.querySelector(`#rwc-tabs-anchor-${this.uuid}`).getBoundingClientRect(),i=t.x-e.x;if(e.top<=t.bottom){let t=document.querySelector(`#rwc-tab-${this.uuid}-main`).getBoundingClientRect(),e=document.querySelector(`#rwc-tabs-continuation-left-${this.uuid}`).getBoundingClientRect();if(i>t.width+1.1*e.width){let e=Math.floor(i/t.width);for(var r=n.length-1;r>-1;r--)e>0&&n[r].classList.remove("invisible"),e--}0==document.querySelectorAll(`#rwc-tabs-${this.uuid} .rwc-tab.invisible`).length&&(document.querySelector(`#rwc-tabs-continuation-left-${this.uuid}`).classList.add("invisible"),document.querySelector(`#rwc-tabs-navigator-${this.uuid} .rwc-arrow-left`).classList.add("invalid"))}}})),this.resizeObserver.observe(this.self)}receiveMessage(t){let e=t.detail;this.printLine(e.user,e.message,e.timestamp,e?.channel?e?.channel:null),this.addPerson({id:e.userID,name:e.user})}processData(t){let e=t.detail,i=e.type,n=e.data;switch(i){case"add-channel":this.addChannel(n);break;case"remove-channel":this.removeChannel(n);break;default:console.log(i,n)}}printLine(t,e,i,n){let r=n||this.defaultChannel;r="rwc-output-"+this.uuid+"-"+r;let s="rwc-output-"+this.uuid+"-main",o=this.outputs[r].element,a=this.outputs[s].element,d=this.getUUID(),c=new Date(i),l=c.getHours().toString().padStart(2,"0")+":"+c.getMinutes().toString().padStart(2,"0")+":"+c.getSeconds().toString().padStart(2,"0")+" "+(c.getHours()>=12?"PM":"AM"),u=this.lineMarkup;u=u.replace("REPLACE_MESSAGE",e).replace("REPLACE_SPEAKER",t).replace("REPLACE_TIMESTAMP",l).replace("LineID",d),fastdom?fastdom.measure((()=>{fastdom.mutate((()=>{o.insertAdjacentHTML("beforeend",u),o.scrollTop=o.scrollHeight,r!=s&&(a.insertAdjacentHTML("beforeend",u),a.scrollTop=a.scrollHeight)}))})):(o.insertAdjacentHTML("beforeend",u),o.scrollTop=o.scrollHeight,r!=s&&(a.insertAdjacentHTML("beforeend",u),a.scrollTop=a.scrollHeight));let h=this.outputs[`rwc-output-${this.uuid}-main`].buffer,g={message:e,user:t,time:i,channel:n,id:d};if(h.push(g),h.length>this.scrollbackLimit){let t=h.shift();for(var w in this.outputs)this.outputs[w].buffer=this.outputs[w].buffer.filter((e=>e.id!=t.id));let e=document.querySelectorAll(`#rwc-${t.id}`);for(var p=0;p<e.length;p++){let t=e[p];fastdom?fastdom.measure((()=>{fastdom.mutate((()=>{t.remove()}))})):t.remove()}}}activate(t){if(-1!=Object.values(this.outputs).map((t=>t.id)).indexOf(t)){for(var e in this.active=t,this.outputs){let i=this.outputs[e];i.id!=t?i.element.classList.add("hidden"):(i.element.classList.remove("hidden"),"who"==t&&this.showUsers())}for(var e in this.tabs){let i=this.tabs[e];i.id!=t?i.element.classList.add("inactive"):i.element.classList.remove("inactive")}}else console.log(`Channel ${t} not found.`)}tabSwitch(t){let e=t.detail.replace("rwc-tab-"+this.uuid+"-","");this.activate(e)}typingStatus(){let t;void 0===this.typingTimer||0==this.typingTimer?(this.typingTimer=(new Date).getTime(),this.raiseEvent(this.body,this.events.startTyping)):(t=this.typingTimer,this.typingTimer=(new Date).getTime()),this.typingTimer-t>this.typingTimeout&&this.resetTyping()}resetTyping(){this.typingTimer=0,this.raiseEvent(this.body,this.events.stopTyping)}userTyping(t){let e=t.detail,i=e.id,n=(e.name,this.users.filter((t=>t.id==i)));n=n.length<=0?this.addPerson(e):n[0],n.state="typing",this.updateStatus()}userStopped(t){let e=t.detail,i=e.id,n=(e.name,this.users.filter((t=>t.id==i)));n.length<=0||(n[0].state="",this.updateStatus())}cycleCommands(t,e){if(document.getSelection().toString()!==this.input.value)return;e.preventDefault();let i=this.commands.indexOf(this.input.value);"up"==t?i>0&&(i-=1,this.input.value=this.commands[i],this.input.select()):"down"==t&&i<this.commands.length-1&&(i+=1,this.input.value=this.commands[i],this.input.select())}modifyRender(){let t=`<div class='rwc-arrow-left  invalid'  onclick='raiseEvent(document.querySelector("body"), "${this.events.arrowLeft}",  "${this.uuid}")'></div> `;t+=`<div class='rwc-arrow-right' onclick='raiseEvent(document.querySelector("body"), "${this.events.arrowRight}", "${this.uuid}")'></div>`,document.querySelector(`#rwc-tabs-anchor-${this.uuid}`).offsetTop<=document.querySelector(`#rwc-tabs-${this.uuid}`).offsetHeight&&(t=t.replace("rwc-arrow-right","rwc-arrow-right invalid")),document.querySelector(`#rwc-input-${this.uuid} .rwc-arrow-enter`).onclick=this.raiseMessage.bind(this);let e=document.querySelector(`#rwc-${this.uuid} .rwc-minimise`);e.onclick=function(){this.toggleMinimise()}.bind(this),e.oncontextmenu=function(){return this.toggleMinimise(!0),!1}.bind(this),fastdom?fastdom.measure((()=>{fastdom.mutate((()=>{document.querySelector("#rwc-tabs-navigator-"+this.uuid).insertAdjacentHTML("beforeend",t)}))})):document.querySelector("#rwc-tabs-navigator-"+this.uuid).insertAdjacentHTML("beforeend",t)}toggleMinimise(t){if(this.unminimisedState)this.self.style.height=this.unminimisedState,void 0!==this.alternated&&(this.self.style.top=this.alternated,this.self.style.bottom="auto"),delete this.unminimisedState,delete this.alternated;else{let e=window.getComputedStyle(this.self),i=e.minHeight;this.unminimisedState=e.height,this.alternated=e.top;let n=e.bottom;t&&(fastdom?fastdom.measure((()=>{fastdom.mutate((()=>{this.self.style.top="auto",this.self.style.bottom=n}))})):(this.self.style.top="auto",this.self.style.bottom=n)),fastdom?fastdom.measure((()=>{fastdom.mutate((()=>{this.self.style.height=i}))})):this.self.style.height=i}}updateStatus(){let t="",e=this.users.filter((t=>"typing"==t.state));e.length>3?t="Several users are typing...":3==e.length?t=e[0].name+", "+e[1].name+", and 1 other are typing...":2==e.length?t=e[0].name+" and "+e[1].name+" are typing...":1==e.length&&(t=e[0].name+" is typing...");let i=document.querySelector(".rwc-footer-status");fastdom?fastdom.measure((()=>{fastdom.mutate((()=>{i.innerHTML="",i.insertAdjacentHTML("beforeend",t)}))})):(i.innerHTML="",i.insertAdjacentHTML("beforeend",t))}arrowLeft(){let t=document.querySelectorAll(`#rwc-tabs-${this.uuid} .rwc-tab.subtab.invisible`);if(t.length>0){t[t.length-1].classList.remove("invisible")}t.length<=1&&(document.querySelector(`#rwc-tabs-navigator-${this.uuid} .rwc-arrow-left`).classList.add("invalid"),document.querySelector(`#rwc-tabs-continuation-left-${this.uuid}`).classList.add("invisible")),document.querySelector(`#rwc-tabs-anchor-${this.uuid}`).offsetTop<=document.querySelector(`#rwc-tabs-${this.uuid}`).offsetHeight||document.querySelector(`#rwc-tabs-navigator-${this.uuid} .rwc-arrow-right`).classList.remove("invalid")}arrowRight(){let t=document.querySelector(`#rwc-tabs-anchor-${this.uuid}`).offsetTop,e=document.querySelector(`#rwc-tabs-${this.uuid}`).offsetHeight;if(t<=e)return void document.querySelector(`#rwc-tabs-navigator-${this.uuid} .rwc-arrow-right`).classList.add("invalid");let i=document.querySelector(`#rwc-tabs-${this.uuid} .rwc-tab.subtab:not(.invisible)`);i&&(i.classList.add("invisible"),document.querySelector(`#rwc-tabs-continuation-left-${this.uuid}`).classList.remove("invisible"),t=document.querySelector(`#rwc-tabs-anchor-${this.uuid}`).offsetTop,t<=e&&document.querySelector(`#rwc-tabs-navigator-${this.uuid} .rwc-arrow-right`).classList.add("invalid"),document.querySelector(`#rwc-tabs-navigator-${this.uuid} .rwc-arrow-left`).classList.remove("invalid"))}addChannel(t){let e="rwc-output-"+this.uuid+"-"+t.identifier,i=`\n        <div id='${e}' class='rwc-output subput hidden'>\n        </div>\n      `;document.querySelector("#rwc-output-"+this.uuid).insertAdjacentHTML("beforeend",i),this.outputs[e]={id:t.identifier,element:document.querySelector("#"+e),buffer:[]},e="rwc-tab-"+this.uuid+"-"+t.identifier;let n=t.identifier.substring(0,Math.min(7,t.identifier.length));"who"==t.identifier&&(n="<img src=data:image/png;base64,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></img>"),i=`<div id='${e}' \n      onclick='raiseEvent(document.querySelector("body"), "${this.events.tabSwitch}", "${e}")'\n      class='rwc-tab subtab inactive'>${n}</div>`,"main"==t.identifier?document.querySelector("#rwc-tabs-main-"+this.uuid).insertAdjacentHTML("beforeend",i):"who"==t.identifier?document.querySelector("#rwc-tabs-who-"+this.uuid).insertAdjacentHTML("beforeend",i):document.querySelector("#rwc-tabs-anchor-"+this.uuid).insertAdjacentHTML("beforebegin",i),this.tabs[e]={id:t.identifier,element:document.querySelector("#"+e)}}removeChannel(t){if("main"==t.identifier)return void console.log("Cannot remove main.");let e="rwc-output-"+this.uuid+"-"+t.identifier;document.querySelector("#"+e).remove(),this.outputs[e]=null}updateChannel(){}addPerson(t){let e=this.users.filter((e=>e.id==t.id));return e.length>0?e[0]:(this.users.push({id:t.id,name:t.name,state:""}),"who"==this.active&&this.showUsers(),this.users[this.users.length-1])}removePerson(){}updatePerson(){}showUsers(){let t=document.querySelector(`#rwc-output-${this.uuid}-who`),e="",i=`<div id='rwc-user-${this.uuid}-USERID' class='rwc-user'><div class='rwc-user-name'>NAME</div></div>`;this.users.forEach((t=>{e+=i.replace("USERID",t.id).replace("NAME",t.name)})),fastdom?fastdom.measure((()=>{fastdom.mutate((()=>{t.innerHTML=e}))})):t.innerHTML=e}raiseMessage(){this.raiseEvent(this.body,this.events.raiseMessage,[this.input.value,"who"==this.active?"main":this.active]),this.input.select(),this.commands.length>0&&this.commands[this.commands.length-1]==this.input.value||this.commands.push(this.input.value),this.commands.length>this.commandsLimit&&this.commands.shift(),this.resetTyping()}draggable(){let t=[null,null,null,null],e=this.self,i=function(e){(e=e||window.event).preventDefault(),t[2]=e.clientX,t[3]=e.clientY,document.onmouseup=r,document.onmousemove=n},n=function(i){(i=i||window.event).preventDefault(),t[0]=t[2]-i.clientX,t[1]=t[3]-i.clientY,t[2]=i.clientX,t[3]=i.clientY,e.style.top=e.offsetTop-t[1]+"px",e.style.left=e.offsetLeft-t[0]+"px"},r=function(){document.onmouseup=null,document.onmousemove=null};document.querySelector("#rwc-header-"+this.uuid+":not(.rwc-tab)").onmousedown=i,document.querySelector("#"+this.self.id+" .rwc-footer-handler").onmousedown=i}remove(){this.unlisten(),this.resizeObserver.disconnect(),document.querySelector("#rwc-"+this.uuid).remove()}static async create(t){return new n(t)}}String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}))};let r=function(t,e,i){return t.dispatchEvent(new CustomEvent(e,{detail:i}))},s=function(t,e,i){let n=i||CSSIdentifier,r='<div class="'+n+'" style="display:none;">&shy;<style>'+t+"</style></div>";document.querySelectorAll(n).forEach((t=>t.remove())),e?document.querySelector(e).insertAdjacentHTML("beforeend",r):document.body.insertAdjacentHTML("beforeend",r)},o="\n  <div id='rwc-LineID' class='rwc-line rwc-line-UUID'>\n    <div class='rwc-line-picture'></div>\n    <div class='rwc-line-speaker'>REPLACE_SPEAKER</div><div class='rwc-line-timestamp'>REPLACE_TIMESTAMP</div>\n    <div class='rwc-line-message'>REPLACE_MESSAGE</div>\n  </div>\n  ",a="\n  <div id='rwc-UUID' class='rwc-container'>\n    <div id='rwc-background-UUID' class='rwc-background'></div>\n    <div id='rwc-header-UUID'     class='rwc-header'>\n       <div id='rwc-tabs-who-UUID' class='rwc-tabs who'></div>\n       <div id='rwc-tabs-main-UUID' class='rwc-tabs main'></div>\n       <div id='rwc-tabs-UUID' class='rwc-tabs residual'><div id='rwc-tabs-continuation-left-UUID' class='rwc-tabs-continuation invisible'>...</div><div id='rwc-tabs-anchor-UUID' class='rwc-tabs-anchor'></div></div>\n       <div id='rwc-tabs-navigator-UUID' class='rwc-navigator'>\n       </div>\n       <div id='rwc-header-minimise-UUID' class='rwc-minimise'></div>\n    </div>\n    <div id='rwc-output-UUID'     class='rwc-output'></div>\n    <div id='rwc-input-UUID'      class='rwc-input' >\n       <div class='rwc-footer-status'></div><input></input>\n       <div class='rwc-footer-handler'></div>\n       <div class='rwc-arrow-enter'>\n         <div class='rwc-arrow-enter-top'></div>\n         <div class='rwc-arrow-enter-bottom'></div>\n       </div>\n    </div>\n  </div>\n  ",d=`\n  @import url('https://fonts.googleapis.com/css2?family=Dosis&family=Poppins:wght@300&display=swap');\n\n  /* RWChatBox */\n  .rwc-container {\n    position  : absolute;\n    left      : ${t.left};\n    top       : ${t.top};\n    height    : ${t.height};\n    width     : ${t.width};\n    min-height: ${t.minHeight};\n    min-width : ${t.minWidth};\n    padding   : ${t.padding};\n    /* design */\n    background   : ${t.background};\n    border       : ${t.border};\n    border-radius: ${t.borderRadius};\n    overflow     : hidden;\n    /* fonts */\n    font-family  : ${t.mainFontFamily};\n    font-size    : ${t.mainFontSize};\n    color        : ${t.color};\n    /* behaviour */\n    resize       : both;\n  }\n  .rwc-background {\n    position       : absolute;\n    left           : 0%;\n    top            : 0%;\n    height         : 100%;\n    width          : 100%;\n    backdrop-filter: blur(9px);\n  }\n  .rwc-header {\n    position     : absolute;\n    left         : 0%;\n    top          : 0%;\n    height       : calc(${t.headerHeight} + 1px);\n    width        : 100%;\n    /* fonts */\n    font-size    : ${t.headerFontSize};\n    color        : ${t.headerFontColor};\n    /* style */\n    overflow     : hidden;\n  }\n  .rwc-output {\n    position     : absolute;\n    left         : 0%;\n    top          : calc(${t.headerHeight} + 1px);\n    height       : calc(100% - ${t.headerHeight} - ${t.inputHeight});\n    width        : 100%;\n    /* fonts */\n    font-size    : ${t.outputFontSize};\n    color        : ${t.outputFontColor};\n  }\n  .rwc-input {\n    position     : absolute;\n    left         : 0%;\n    bottom       : 0%;\n    height       : ${t.inputHeight};\n    width        : 100%;\n    /* style */\n    /* border-top   : 1px solid rgba( 144, 144, 144, 1.00 ); */\n  }\n  .rwc-input input {\n    position     : absolute;\n    bottom       : ${t.inputBottom};\n    height       : ${t.inputBoxHeight};\n    width        : calc(100% - ${t.lineLeftPadding} - ${t.inputRightPadding});\n    margin-left  : ${t.lineLeftPadding};\n    margin-right : ${t.inputRightPadding};\n    /* reset style */\n    border       : none;\n    outline      : none;\n    padding-left : ${t.inputPadding};\n    padding-right: ${t.inputPadding};\n    /* fonts */\n    font-size    : ${t.inputFontSize};\n    color        : ${t.inputFontColor};\n    /* style */\n    color        : ${t.inputFontColor};\n    background   : ${t.inputBackground};\n    line-height  : ${t.inputBoxHeight};\n    border-radius: ${t.inputRadius};\n  }\n  .rwc-input input:focus {\n    color        : ${t.inputFontColorFocus};\n    background   : ${t.inputBackgroundFocus};\n  }\n  .rwc-output.subput {\n    top          : 0%;\n    height       : 100%;\n    overflow     : hidden;\n    overflow-y   : scroll;\n    background   : ${t.outputActiveColor};\n  }\n  .rwc-output.subput.hidden {\n    display      : none;\n  }\n  \n  .rwc-line {\n    padding-top   : ${t.lineTopPadding};\n    padding-bottom: ${t.lineBottomPadding};\n  }\n  .rwc-line:hover {\n    background    : rgba( 255, 255, 255, 0.06 );\n  }\n  .rwc-line-speaker,\n  .rwc-line-timestamp {\n    display       : inline-block;\n    font-size     : ${t.speakerFontSize};\n  }\n  .rwc-line-speaker {\n    padding-left  : ${t.lineLeftPadding};\n    padding-right : ${t.lineRightPadding};\n    color         : ${t.lineSpeakerColor};\n  }\n  .rwc-line-timestamp {\n    color         : ${t.lineTimestampColor};\n  }\n  .rwc-line-message {\n    padding-left  : ${t.lineLeftPadding};\n    padding-right : ${t.lineRightPadding};\n  }\n  \n  .rwc-tabs {\n    position      : absolute;\n    top           : calc(100% - ${t.tabHeight});\n    height        : ${t.tabHeight};\n    width         : calc(100% - ${t.tabLeftPadding} * 2);\n    /* margin-left   : ${t.tabLeftPadding}; */\n    /* margin-right  : ${t.tabLeftPadding}; */\n  }\n  .rwc-tabs.main {\n    left          : ${t.whoWidth};\n  }\n  .rwc-tabs.who .rwc-tab {\n    width         : ${t.whoWidth};\n  }\n  .rwc-tabs.who .rwc-tab img {\n    width         : calc(0.46 * ${t.whoWidth});\n    height        : calc(0.46 * ${t.whoWidth});\n    position      : absolute;\n    top           : 50%;\n    left          : 50%;\n    transform     : translate( -50%, -50% );\n    filter        : invert(0.56) opacity(0.78);\n  }\n  .rwc-tabs.residual {\n    left          : calc(${t.whoWidth} + ${t.tabsWidth});\n    width         : calc(100% - ${t.tabLeftPadding} * 2 - ${t.tabsWidth} - ${t.whoWidth} - ${t.tabsNavigatorWidth});\n  }\n  .rwc-tab,\n  .rwc-tabs-continuation {\n    position      : relative;\n    display       : inline-block;\n    width         : ${t.tabsWidth};\n    height        : 100%;\n    /* fonts */\n    text-align    : center;\n    font-size     : ${t.tabsFontSize};\n    color         : ${t.tabsFontColor};\n    line-height   : ${t.tabHeight};\n    /* behaviour */\n    cursor        : pointer;\n    user-select   : none;\n  }\n  .rwc-tab {\n    /* design */\n    border-top    : 1px solid ${t.tabsBorderColor};\n    border-right  : 1px solid ${t.tabsBorderColor};\n    border-top-right-radius: 6px;\n    background    : ${t.outputActiveColor};\n  }\n  .rwc-tab:hover {\n    color         : ${t.tabsFontColorHighlighted};\n  }\n  .rwc-tab.inactive {\n    background    : ${t.tabsInactiveColor};\n  }\n  .rwc-tab.invisible {\n    display       : none;\n  }\n  .rwc-tab.inactive:hover {\n    background    : ${t.tabsInactiveHoverColor};\n  }\n  .rwc-tabs-anchor {\n    position      : relative;\n    display       : inline-block;\n  }\n  .rwc-tabs-continuation {\n    width         : ${t.tabsContinuationWidth};\n    border-top    : 1px solid ${t.tabsBorderColor};\n    background    : ${t.tabsInactiveColor};\n  }\n  .rwc-tabs-continuation.invisible {\n    display       : none;\n  }\n  \n  .rwc-navigator {\n    position      : absolute;\n    right         : 0%;\n    top           : calc(100% - ${t.tabHeight});\n    height        : ${t.tabHeight};\n    width         : calc(${t.arrowSize} * 1.5 * 2);\n  }\n  .rwc-arrow-right,\n  .rwc-arrow-left  {\n    position     : relative;\n    top          : 25%;\n    left         : -18%;\n    display      : inline-block;\n    width        : 0;\n    height       : 0;\n    border-top   : ${t.arrowSize} solid transparent;\n    border-bottom: ${t.arrowSize} solid transparent;\n    /* style */\n    cursor       : pointer;\n  }\n  .rwc-arrow-right {\n    border-left  : ${t.arrowSize} solid ${t.arrowColor};\n  }\n  .rwc-arrow-left {\n    border-right : ${t.arrowSize} solid ${t.arrowColor};\n  }\n  .rwc-arrow-right:hover {\n    border-left  : ${t.arrowSize} solid ${t.arrowColorActive};\n  }\n  .rwc-arrow-left:hover {\n    border-right : ${t.arrowSize} solid ${t.arrowColorActive};\n  }\n  .rwc-arrow-right.invalid {\n    border-left  : ${t.arrowSize} solid ${t.arrowColorInvalid};\n  }\n  .rwc-arrow-left.invalid  {\n    border-right : ${t.arrowSize} solid ${t.arrowColorInvalid};\n  }\n  .rwc-minimise {\n    position     : absolute;\n    top          : 0.1ch;\n    right        : 4ch;\n    height       : 0.9ch;\n    width        : 2.4ch;\n    background   : rgba(   1,   1,   1, 0.18 );\n    /* style */\n    cursor       : pointer;\n    transition   : all 140ms;\n    border-bottom: 1px solid rgba( 255, 255, 255, 0.15 );\n    border-bottom-left-radius : 2px;\n    border-bottom-right-radius: 2px;\n  }\n  .rwc-minimise:hover {\n    background   : rgba( 101, 101, 101, 0.45 );\n    border-bottom: 1px solid rgba(   1,   1,   1, 0.45 );\n  }\n  \n  .rwc-arrow-enter {\n    position     : absolute;\n    top          : calc(0.8*(100% - ${t.inputBoxHeight}) + ${t.inputBoxHeight}/2);\n    right        : 0px;\n    height       : ${t.arrowEnterDimensions};\n    width        : ${t.arrowEnterDimensions};\n    border-radius: 3px;\n    background   : rgba( 255, 255, 255, 0.00 );\n    transform    : translate( 0%, -50% );\n    transition   : all 140ms;\n    /* style */\n    cursor       : pointer;\n  }\n  .rwc-arrow-enter-top,\n  .rwc-arrow-enter-bottom  {\n    position     : absolute;\n    left         : 50%;\n    top          : 50%;\n    width        : 0;\n    height       : 0;\n  }\n  .rwc-arrow-enter-top {\n    transform    : translate( -50%, -101% );\n    border-top   : ${t.arrowEnterSize} solid transparent;\n    border-left  : ${1.88*parseInt(t.arrowEnterSize.replace("px",""))+"px"} solid ${t.arrowEnterColor};\n  }\n  .rwc-arrow-enter-bottom {\n    transform    : translate( -50%,   11% );\n    border-bottom: ${t.arrowEnterSize} solid transparent;\n    border-left  : ${1.88*parseInt(t.arrowEnterSize.replace("px",""))+"px"} solid ${t.arrowEnterColor};\n  }\n  .rwc-arrow-enter:hover .rwc-arrow-enter-top,\n  .rwc-arrow-enter:hover .rwc-arrow-enter-bottom {\n    border-left  : ${1.88*parseInt(t.arrowEnterSize.replace("px",""))+"px"} solid ${t.arrowEnterHoverColor};\n  }\n  .rwc-arrow-enter:hover .rwc-arrow-enter-top {\n    transform    : translate( -50%, -101% );\n  }\n  .rwc-arrow-enter:hover .rwc-arrow-enter-bottom {\n    transform    : translate( -50%,   11% );\n  }\n  \n  .rwc-footer-status {\n    position      : absolute;\n    top           : 0%;\n    left          : 0%;\n    width         : calc(100% - ${t.lineLeftPadding} * 2);\n    margin-left   : ${t.lineLeftPadding};\n    margin-right  : ${t.lineLeftPadding};\n    height        : calc(100% - ${t.inputBoxHeight});\n    color         : ${t.statusFontColor};\n  }\n  .rwc-footer-handler {\n    position      : absolute;\n    bottom        : 0%;\n    left          : 0%;\n    width         : ${t.lineLeftPadding};\n    height        : ${t.inputBoxHeight};\n  }\n\n  .rwc-user {\n    padding-top   : ${t.lineTopPadding};\n    padding-bottom: ${t.lineBottomPadding};\n    padding-left  : ${t.lineLeftPadding};\n    height        : ${t.userLineHeight};\n    line-height   : ${t.userLineHeight};\n  }\n  .rwc-user:hover {\n    background    : rgba( 255, 255, 255, 0.06 );\n  }\n  `;return window.raiseEvent||(window.raiseEvent=r),{new:n.create}}();
